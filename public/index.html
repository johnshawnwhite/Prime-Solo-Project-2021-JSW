<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#000000">
    <!-- <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v2.4.0/mapbox-gl.css' rel='stylesheet' /> -->


    <title>App</title>
  </head>
  <body>
    <noscript>
      You need to enable JavaScript to run this app.
    </noscript>
    <div id="react-root"></div>
  </body>
</html>

<!-- 
import React, { useState, useCallback } from "react";
import { useSelector, useDispatch } from "react-redux";
// import {render} from 'react-dom';
import ReactMapGL, { Marker, Popup, GeolocateControl, MapContext, NavigationControl } from "react-map-gl";
// import {marker, popup} from "react-map-gl";{MapContext}, useEffect
import places from "../data/featureCollection.json";

const MAPBOX_TOKEN =
  "pk.eyJ1Ijoia2RzemFmcmFuc2tpIiwiYSI6ImNrczZhNGM0NzA4MG0yb210enlhOWkxaHkifQ.GEhDTku0VpkCA5wdnwDBvA"; // Set your mapbox token here

function Overlays() {
  const start = useSelector((store) => store.locations.overlayStartingPoints);
  const dispatch = useDispatch();

  const navStyle = {
  position: 'absolute',
  top: 0,
  left: 0,
  padding: '10px'
  };

  const [viewport, setViewport] = useState({
    width: "60vw",
    height: "40vw",
    latitude: start.latitude,
    longitude: start.longitude,
    zoom: 13,
  });

  const [marker, setMarker] = useState({
    latitude: 40,
    longitude: -100
  });
  const [events, logEvents] = useState({});

  const onMarkerDragStart = useCallback(event => {
    logEvents(_events => ({..._events, onDragStart: event.lngLat}));
  }, []);

  const onMarkerDrag = useCallback(event => {
    logEvents(_events => ({..._events, onDrag: event.lngLat}));
  }, []);

  const onMarkerDragEnd = useCallback(event => {
    logEvents(_events => ({..._events, onDragEnd: event.lngLat}));
    setMarker({
      longitude: event.lngLat[0],
      latitude: event.lngLat[1]
    });

  // function CurrentZoomLevel() {
  //   const context = React.useContext(MapContext);
  
  //   return <div>{context.viewport.zoom}</div>;
  // }

  const [selectedMountain, setSelectedMountain] = useState(null);

  const [latitude, setLatitude] = useState("");
  const [longitude, setLongitude] = useState("");
  const [description, setDescription] = useState("");

  const onNextClick = () => {
    const marker = {
      latitude: latitude,
      longitude: longitude,
      description: description,
    };
    //  this function needs to be connected to the database still and correctly adding the marker to the user location collection list,
    console.log("adding a marker to overlay", marker);
    dispatch({
      type: "ADD_MARKER",
      payload: marker,
    });
    // also need to be able to edit and delete the markers, so maybe a list appended to the dom that populates an edit and delete button
    // the edit button......hmmm...

    
    // alert("Prewind for loading");
    // history.push('/checkout');    need to reload map on click event
  };
  React.useEffect(() => {
    navigator.geolocation.getCurrentPosition((pos) => {
      setViewport({
        ...viewport,
        CurrentZoomLevel  
        // latitude: pos.coords.latitude,
        // longitude: pos.coords.longitude,
      });
    });
  }, [viewport]);

  return (
    <div className="mapdiv">
      <h1>Add A NEW MARKER</h1>
      <input
        type="text"
        onChange={(event) => setLatitude(event.target.value)}
        placeholder="latitude"
        value={latitude}
      />
      <input
        type="text"
        onChange={(event) => setLongitude(event.target.value)}
        placeholder="Longitude"
        value={longitude}
      />
      <input
        type="text"
        onChange={(event) => setDescription(event.target.value)}
        placeholder="Description"
        value={description}
      />
      <button onClick={onNextClick}>Post it!</button>
      <ReactMapGL
        {...viewport}
        onViewportChange={(nextViewport) => setViewport(nextViewport)}
        mapStyle="mapbox://styles/mapbox/streets-v11"
        mapboxApiAccessToken={MAPBOX_TOKEN}
      >
        {/* <GeolocateControl
          positionOptions={{ enableHighAccuracy: true }}
          trackUserLocation={true}
        /> */}
        
        {places.features.map((mountain) => {
          return (
            <Marker
              key={mountain.properties.id}
              latitude={marker.latitude, mountain.geometry.coordinates[1]}
              longitude={marker.longitude, mountain.geometry.coordinates[0]}
              offsetLeft={-20}
              offsetTop={-10}
              draggable
              onDragStart={onMarkerDragStart}
              onDrag={onMarkerDrag}
              onDragEnd={onMarkerDragEnd}
            >
              <Pin size={20} />
              <button
                class="marker-btn"
                onClick={(event) => {
                  event.preventDefault();
                  setSelectedMountain(mountain);
                }}
              >
                <img src="/snowboard.png" alt="location icon" />
              </button>
              
            </Marker>
            
          );
        })}
        {selectedMountain ? (
          <Popup
            latitude={selectedMountain.geometry.coordinates[1]}
            longitude={selectedMountain.geometry.coordinates[0]}
            onClose={() => {
              setSelectedMountain(null);
            }}
          >
            <div>
              <h6>{selectedMountain.properties.name}</h6>
            </div>
          </Popup>
        ) : null}
        <div className="nav" style={navStyle}>
          <NavigationControl />
        </div>
      </ReactMapGL>
      <ControlPanel events={events}></ControlPanel>
    </div>
  );
}

export default Overlays; -->



<!-- 


import React, { useState } from "react";
import { useSelector, useDispatch } from "react-redux";
// import {render} from 'react-dom';
import ReactMapGL, { Marker, Popup, GeolocateControl } from "react-map-gl";
// import {marker, popup} from "react-map-gl";{MapContext}, useEffect
import places from "../data/featureCollection.json";

const MAPBOX_TOKEN =
  "pk.eyJ1Ijoia2RzemFmcmFuc2tpIiwiYSI6ImNrczZhNGM0NzA4MG0yb210enlhOWkxaHkifQ.GEhDTku0VpkCA5wdnwDBvA"; // Set your mapbox token here

function Overlays() {
  const start = useSelector((store) => store.locations.overlayStartingPoints);
  const dispatch = useDispatch();

  const [viewport, setViewport] = useState({
    width: "60vw",
    height: "40vw",
    latitude: start.latitude,
    longitude: start.longitude,
    zoom: 13,
  });

  const [selectedMountain, setSelectedMountain] = useState(null);

  const [latitude, setLatitude] = useState("");
  const [longitude, setLongitude] = useState("");
  const [description, setDescription] = useState("");

  const onNextClick = () => {
    const marker = {
      latitude: latitude,
      longitude: longitude,
      description: description,
    };
    //  this function needs to be connected to the database still and correctly adding the marker to the user location collection list,
    console.log("adding a marker to overlay", marker);
    dispatch({
      type: "ADD_MARKER",
      payload: marker,
    });
    // also need to be able to edit and delete the markers, so maybe a list appended to the dom that populates an edit and delete button
    // the edit button......hmmm...

    
    // alert("Prewind for loading");
    // history.push('/checkout');    need to reload map on click event
  };

  const handleClick = () => {
    const marker = {
      latitude: latitude,
      longitude: longitude,
      description: description,
    };

    dispatch({
      type: "GET_MARKER"
    });
  };

  React.useEffect(() => {
    navigator.geolocation.getCurrentPosition((pos) => {
      setViewport({
        ...viewport,
        // latitude: pos.coords.latitude,
        // longitude: pos.coords.longitude,
      });
    });
  }, [viewport]);

  return (
    <div className="mapdiv">
      <h1>Add A NEW MARKER</h1>
      <input
        type="text"
        onChange={(event) => setLatitude(event.target.value)}
        placeholder="latitude"
        value={latitude}
      />
      <input
        type="text"
        onChange={(event) => setLongitude(event.target.value)}
        placeholder="Longitude"
        value={longitude}
      />
      <input
        type="text"
        onChange={(event) => setDescription(event.target.value)}
        placeholder="Description"
        value={description}
      />
      <button onClick={onNextClick}>Post it!</button>
      <button onClick={handleClick}>Show me markers!</button>
      <ReactMapGL
        {...viewport}
        onViewportChange={(nextViewport) => setViewport(nextViewport)}
        mapStyle="mapbox://styles/mapbox/streets-v11"
        mapboxApiAccessToken={MAPBOX_TOKEN}
      >
        {/* <GeolocateControl
          positionOptions={{ enableHighAccuracy: true }}
          trackUserLocation={true}
        /> */}

        {/* this is javascript, for mapbox gl js. it wont work. */}
        {/* <div>
          <div className="sidebar">
            Longitude: {longitude} | Latitude: {latitude}
          </div>
          <div ref="mapdiv" />
        </div> */}
        {places.features.map((mountain) => {
          return (
            <Marker
              key={mountain.properties.id}
              latitude={mountain.geometry.coordinates[1]}
              longitude={mountain.geometry.coordinates[0]}
              offsetLeft={-20}
              offsetTop={-10}
            >
              <button
                className="marker-btn"
                onClick={(event) => {
                  event.preventDefault();
                  setSelectedMountain(mountain);
                }}
              >
                <img src="/snowboard.png" alt="location icon" />
              </button>
            </Marker>
          );
        })}
        {selectedMountain ? (
          <Popup
            latitude={selectedMountain.geometry.coordinates[1]}
            longitude={selectedMountain.geometry.coordinates[0]}
            onClose={() => {
              setSelectedMountain(null);
            }}
          >
            <div>
              <h6>{selectedMountain.properties.name}</h6>
              <button>stuff</button>
              <button>bye</button>
            </div>
          </Popup>
        ) : null}
      </ReactMapGL>
    </div>
  );
}

export default Overlays; -->
